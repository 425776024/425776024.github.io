(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{396:function(t,s,a){"use strict";a.r(s);var m=a(0),i=Object(m.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("只有听了这个才看懂了：https://www.bilibili.com/video/av68676810/?p=92&t=272")]),t._v(" "),a("h3",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),a("blockquote",[a("p",[t._v("RNN虽然能表示完整句子，双向的每一个输出考虑了前后上下文，但是需要顺序计算，不能并行")]),t._v(" "),a("p",[t._v("CNN能多层提取，虽然这样后面的输出也能考虑所有的上下文，但是需要很多层，句子越长层叠的越多才能达到RNN那种效果")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/image-20191102132722577.png",alt:""}})]),t._v(" "),a("p",[t._v("所以出来了Self-Attention，希望能并行，且和RNN一样的输入输出效果（能捕捉全局信息）。希望的效果是，能和左边的RNN一样：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/image-20191102133930641.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#流程"}},[t._v("#")]),t._v(" 流程")]),t._v(" "),a("p",[t._v("对输入数据，变成"),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[a("mjx-math",{staticClass:" MJX-TEX"},[a("mjx-msup",[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"a"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"0.363em"}},[a("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[a("mjx-c",{attrs:{c:"i"}})],1)],1)],1)],1)],1),t._v("向量后，分别和3个（需要学习的参数，一开始可以随机初始化）矩阵"),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[a("mjx-math",{staticClass:" MJX-TEX"},[a("mjx-msup",[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"W"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"0.363em","margin-left":"0.071em"}},[a("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[a("mjx-c",{attrs:{c:"q"}})],1)],1)],1),a("mjx-mo",{staticClass:"mjx-n"},[a("mjx-c",{attrs:{c:","}})],1),a("mjx-msup",{attrs:{space:"2"}},[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"W"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"0.363em","margin-left":"0.071em"}},[a("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[a("mjx-c",{attrs:{c:"k"}})],1)],1)],1),a("mjx-mo",{staticClass:"mjx-n"},[a("mjx-c",{attrs:{c:","}})],1),a("mjx-msup",{attrs:{space:"2"}},[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"W"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"0.363em","margin-left":"0.071em"}},[a("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[a("mjx-c",{attrs:{c:"v"}})],1)],1)],1)],1)],1),t._v("相乘，得到3个向量，代表当前i数据的查询向量q、被匹配向量k、去抽取信息向量v，这样做法是后面能并行计算且抽取到全局信息设计的")],1),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/image-20191102134131983.png",alt:""}})]),t._v(" "),a("p",[t._v("开始用查询向量和被匹配向量进行计算，得到"),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[a("mjx-math",{staticClass:" MJX-TEX"},[a("mjx-msub",[a("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[a("mjx-c",{attrs:{c:"3B1"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[a("mjx-TeXAtom",{attrs:{size:"s"}},[a("mjx-mn",{staticClass:"mjx-n"},[a("mjx-c",{attrs:{c:"1"}})],1),a("mjx-mo",{staticClass:"mjx-n"},[a("mjx-c",{attrs:{c:","}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"i"}})],1)],1)],1)],1)],1)],1),t._v("然后softmax得到"),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[a("mjx-math",{staticClass:" MJX-TEX"},[a("mjx-TeXAtom",[a("mjx-mover",[a("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.52em","margin-bottom":"-0.531em"}},[a("mjx-mo",{staticClass:"mjx-n"},[a("mjx-c",{attrs:{c:"^"}})],1)],1),a("mjx-base",[a("mjx-msub",[a("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[a("mjx-c",{attrs:{c:"3B1"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[a("mjx-TeXAtom",{attrs:{size:"s"}},[a("mjx-mn",{staticClass:"mjx-n"},[a("mjx-c",{attrs:{c:"1"}})],1),a("mjx-mo",{staticClass:"mjx-n"},[a("mjx-c",{attrs:{c:","}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"i"}})],1)],1)],1)],1)],1)],1)],1)],1)],1),t._v("，也就是attention里面的打分，表示对全局4个信息的注意力大小，与用于被抽取信息向量v加权和起来")],1),t._v(" "),a("p",[a("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[a("mjx-math",{staticClass:" MJX-TEX"},[a("mjx-msup",[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"b"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"0.363em"}},[a("mjx-mn",{staticClass:"mjx-n",attrs:{size:"s"}},[a("mjx-c",{attrs:{c:"1"}})],1)],1)],1),a("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[a("mjx-c",{attrs:{c:"="}})],1),a("mjx-munder",{attrs:{space:"4",limits:"false"}},[a("mjx-mo",{staticClass:"mjx-sop"},[a("mjx-c",{attrs:{c:"2211"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"-0.285em"}},[a("mjx-TeXAtom",{attrs:{size:"s"}},[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"i"}})],1)],1)],1)],1),a("mjx-TeXAtom",{attrs:{space:"2"}},[a("mjx-mover",[a("mjx-over",{staticStyle:{"padding-bottom":"0.06em","padding-left":"0.52em","margin-bottom":"-0.531em"}},[a("mjx-mo",{staticClass:"mjx-n"},[a("mjx-c",{attrs:{c:"^"}})],1)],1),a("mjx-base",[a("mjx-msub",[a("mjx-mi",{staticClass:"mjx-i",attrs:{noIC:"true"}},[a("mjx-c",{attrs:{c:"3B1"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"-0.15em"}},[a("mjx-TeXAtom",{attrs:{size:"s"}},[a("mjx-mn",{staticClass:"mjx-n"},[a("mjx-c",{attrs:{c:"1"}})],1),a("mjx-mo",{staticClass:"mjx-n"},[a("mjx-c",{attrs:{c:","}})],1),a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"i"}})],1)],1)],1)],1)],1)],1)],1),a("mjx-msup",[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"v"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"0.363em"}},[a("mjx-mi",{staticClass:"mjx-i",attrs:{size:"s"}},[a("mjx-c",{attrs:{c:"i"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("p",[t._v("就是这次提取出来的信息向量，这个信息向量捕捉了全部输入")]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/image-20191102140015933.png",alt:""}})]),t._v(" "),a("p",[t._v("第二个输出，此时第二个输入的查询向量q去和所有的k做计算，然后softmax得分然后加权和v得到"),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML"}},[a("mjx-math",{staticClass:" MJX-TEX"},[a("mjx-msup",[a("mjx-mi",{staticClass:"mjx-i"},[a("mjx-c",{attrs:{c:"b"}})],1),a("mjx-script",{staticStyle:{"vertical-align":"0.363em"}},[a("mjx-mn",{staticClass:"mjx-n",attrs:{size:"s"}},[a("mjx-c",{attrs:{c:"2"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/image-20191102141506065.png",alt:""}})]),t._v(" "),a("p",[t._v("以上类推，能计算出全部的输出：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/image-20191102142344992.png",alt:""}})]),t._v(" "),a("p",[t._v("矩阵运算表示：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/image-20191102142607008.png",alt:""}})]),t._v(" "),a("p",[t._v("得到分数：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/image-20191102142730715.png",alt:""}})]),t._v(" "),a("p",[t._v("得到输出：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/image-20191102142843695.png",alt:""}})]),t._v(" "),a("p",[t._v("总结：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/image-20191102142934971.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"变形multi-head-self-attention"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变形multi-head-self-attention"}},[t._v("#")]),t._v(" 变形Multi-head Self-attention")]),t._v(" "),a("p",[t._v("有多个q、k、v层")]),t._v(" "),a("p",[a("img",{attrs:{src:"/imgs/image-20191102151404235.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"特定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特定"}},[t._v("#")]),t._v(" 特定")]),t._v(" "),a("p",[t._v("对self-attention来说，其输入顺序是不重要的")])])}),[],!1,null,null,null);s.default=i.exports}}]);